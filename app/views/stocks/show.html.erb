<div class="container">
  <div class="top-div">
    <%= link_to "Home", root_path %>
    <h2> Show Page of Stock <%= @stock.name %> </h2>
    <button class="btn btn-info" id="set" > Set Strategy </button>
  </div>
    <table class="table">
      <thead>
        <tr>
        <td> Date </td>
        <td> Open </td>
        <td> High </td>
        <td> Low </td>
        <td> Close </td>
        <td> MM5 </td>
        <td> MM13 </td>
        <td> MM21 </td>
        <td> EMA4 </td>
        </tr>
      </thead>
      <tbody>
      <% expo_average = [] %>
      <% row = 0 %>
      <% @stock.trade_dates.each do |date| %>
        <% if row < @stock.trade_dates.count %>
          <tr>
          <td> <%= date.day %> </td>
          <td> <%= number_to_currency(date.open) %> </td>
          <td> <%= number_to_currency(date.high) %> </td>
          <td> <%= number_to_currency(date.low) %> </td>
          <td> <%= number_to_currency(date.close) %> </td>
          <td> <%= number_to_currency(@moving_average1) %> </td>
          <td> <%= number_to_currency(@moving_average2) %> </td>
          <td> <%= number_to_currency(@moving_average3) %> </td>
          <td class="expo_average">
            <% if row < 5 %>
              <p> --- </p>
            <% else %>
              <%= number_to_currency(expo_average.ema(row - 1, 5)) %> </td>
            <% end %>
          </tr>
          <% expo_average << date.close %>
        <% end %>
        <% row += 1 %>
      <% end %>
      </tbody>
    </table>
</div>

